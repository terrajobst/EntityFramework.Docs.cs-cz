---
title: Práce s odpojenými entitami - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 12138003-a373-4817-b1b7-724130202f5f
ms.openlocfilehash: f1ce44e7b00ec4c60a81ed850ce5c9d866495e1b
ms.sourcegitcommit: 9b562663679854c37c05fca13d93e180213fb4aa
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/07/2020
ms.locfileid: "78419526"
---
# <a name="working-with-disconnected-entities"></a><span data-ttu-id="1d544-102">Práce s odpojenými entitami</span><span class="sxs-lookup"><span data-stu-id="1d544-102">Working with disconnected entities</span></span>
<span data-ttu-id="1d544-103">V aplikaci založené na rozhraní entity je třída kontextu zodpovědná za zjišťování změn použitých na sledované entity.</span><span class="sxs-lookup"><span data-stu-id="1d544-103">In an Entity Framework-based application, a context class is responsible for detecting changes applied to tracked entities.</span></span> <span data-ttu-id="1d544-104">Volání SaveChanges metoda přetrvává změny sledované kontextu do databáze.</span><span class="sxs-lookup"><span data-stu-id="1d544-104">Calling the SaveChanges method persists the changes tracked by the context to the database.</span></span> <span data-ttu-id="1d544-105">Při práci s n-vrstvé aplikace, objekty entity jsou obvykle změněny při odpojení od kontextu a musíte se rozhodnout, jak sledovat změny a sestavy těchto změn zpět do kontextu.</span><span class="sxs-lookup"><span data-stu-id="1d544-105">When working with n-tier applications, entity objects are usually modified while disconnected from the context, and you must decide how to track changes and report those changes back to the context.</span></span> <span data-ttu-id="1d544-106">Toto téma popisuje různé možnosti, které jsou k dispozici při použití entity framework s odpojenými entitami.</span><span class="sxs-lookup"><span data-stu-id="1d544-106">This topic discusses different options that are available when using Entity Framework with disconnected entities.</span></span>   

## <a name="web-service-frameworks"></a><span data-ttu-id="1d544-107">Rozhraní webových služeb</span><span class="sxs-lookup"><span data-stu-id="1d544-107">Web service frameworks</span></span>

<span data-ttu-id="1d544-108">Technologie webových služeb obvykle podporují vzory, které lze použít k zachování změn na jednotlivých odpojených objektech.</span><span class="sxs-lookup"><span data-stu-id="1d544-108">Web services technologies typically support patterns that can be used to persist changes on individual disconnected objects.</span></span> <span data-ttu-id="1d544-109">Například ASP.NET webové rozhraní API umožňuje akce řadiče kódu, které mohou zahrnovat volání EF zachovat změny provedené v objektu v databázi.</span><span class="sxs-lookup"><span data-stu-id="1d544-109">For example, ASP.NET Web API allows you to code controller actions that can include calls to EF to persist changes made to an object on a database.</span></span> <span data-ttu-id="1d544-110">Nástroje webového rozhraní API v sadě Visual Studio ve skutečnosti usnadňují vytvoření uživatelského rozhraní webového rozhraní API z modelu Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="1d544-110">In fact, the Web API tooling in Visual Studio makes it easy to scaffold a Web API controller from your Entity Framework 6 model.</span></span> <span data-ttu-id="1d544-111">Další informace naleznete [v tématu použití webového rozhraní API s entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span><span class="sxs-lookup"><span data-stu-id="1d544-111">For more information, see [using Web API with Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span></span>   

<span data-ttu-id="1d544-112">V minulosti existovalo několik dalších technologií webových služeb, které nabízely integraci s rozhraním Entity Framework, jako jsou [wcf datové služby](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) a [ria služby](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span><span class="sxs-lookup"><span data-stu-id="1d544-112">Historically, there have been several other Web services technologies that offered integration with Entity Framework, like [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) and [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span></span>

## <a name="low-level-ef-apis"></a><span data-ttu-id="1d544-113">Nízkoúrovňová EF API</span><span class="sxs-lookup"><span data-stu-id="1d544-113">Low-level EF APIs</span></span>

<span data-ttu-id="1d544-114">Pokud nechcete používat existující n-vrstvé řešení nebo pokud chcete přizpůsobit, co se děje uvnitř akce řadiče ve službách webového rozhraní API, entity framework poskytuje rozhraní API, která umožňují použít změny provedené na odpojené vrstvě.</span><span class="sxs-lookup"><span data-stu-id="1d544-114">If you don't want to use an existing n-tier solution, or if you want to customize what happens inside a controller action in a Web API services, Entity Framework provides APIs that allow you to apply changes made on a disconnected tier.</span></span> <span data-ttu-id="1d544-115">Další informace naleznete v tématu [Přidání, Připojení a stav entity](~/ef6/saving/change-tracking/entity-state.md).</span><span class="sxs-lookup"><span data-stu-id="1d544-115">For more information, see [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md).</span></span>  

## <a name="self-tracking-entities"></a><span data-ttu-id="1d544-116">Entity samočinného sledování</span><span class="sxs-lookup"><span data-stu-id="1d544-116">Self-Tracking Entities</span></span>  

<span data-ttu-id="1d544-117">Sledování změn na libovolných grafech entit při odpojení od kontextu EF je pevný problém.</span><span class="sxs-lookup"><span data-stu-id="1d544-117">Tracking changes on arbitrary graphs of entities while disconnected from the EF context is a hard problem.</span></span> <span data-ttu-id="1d544-118">Jedním z pokusů o jeho vyřešení byla šablona generování kódu entity samočinného sledování.</span><span class="sxs-lookup"><span data-stu-id="1d544-118">One of the attempts to solve it was the Self-Tracking Entities code generation template.</span></span> <span data-ttu-id="1d544-119">Tato šablona generuje třídy entit, které obsahují logiku ke sledování změn provedených na odpojené vrstvě jako stav v samotných entitách.</span><span class="sxs-lookup"><span data-stu-id="1d544-119">This template generates entity classes that contain logic to track changes made on a disconnected tier as state in the entities themselves.</span></span> <span data-ttu-id="1d544-120">Sada rozšiřujících metod je také generována k použití těchto změn v kontextu.</span><span class="sxs-lookup"><span data-stu-id="1d544-120">A set of extension methods is also generated to apply those changes to a context.</span></span>

<span data-ttu-id="1d544-121">Tuto šablonu lze použít s modely vytvořenými pomocí EF Designer, ale nelze použít s modely Code First.</span><span class="sxs-lookup"><span data-stu-id="1d544-121">This template can be used with models created using the EF Designer, but can not be used with Code First models.</span></span> <span data-ttu-id="1d544-122">Další informace naleznete [v tématu Entity samočinného sledování](self-tracking-entities/index.md).</span><span class="sxs-lookup"><span data-stu-id="1d544-122">For more information, see [Self-Tracking Entities](self-tracking-entities/index.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="1d544-123">Už nedoporučujeme používat šablonu self-tracking-entities.</span><span class="sxs-lookup"><span data-stu-id="1d544-123">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="1d544-124">Bude i nadále k dispozici pouze pro podporu stávajících aplikací.</span><span class="sxs-lookup"><span data-stu-id="1d544-124">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="1d544-125">Pokud vaše aplikace vyžaduje práci s odpojenými grafy entit, zvažte jiné alternativy, jako jsou [sledovatelné entity](https://trackableentities.github.io/), což je technologie podobná samoobslužným sledovacím entitám, která je aktivněji vyvinuta komunitou, nebo psaní vlastního kódu pomocí nízkoúrovňových nastavení api pro sledování změn.</span><span class="sxs-lookup"><span data-stu-id="1d544-125">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](https://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>
