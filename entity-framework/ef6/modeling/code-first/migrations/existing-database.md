---
title: Migrace Code First s existující databází – EF6
author: divega
ms.date: 10/23/2016
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
ms.openlocfilehash: eb7948eafb1322cabcf69b47bd5411f762fe8498
ms.sourcegitcommit: 708b18520321c587b2046ad2ea9fa7c48aeebfe5
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/09/2019
ms.locfileid: "72182586"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="945ec-102">Migrace Code First s existující databází</span><span class="sxs-lookup"><span data-stu-id="945ec-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="945ec-103">**EF 4.3 a vyšší pouze** – funkce, rozhraní API atd. popsané na této stránce byly představeny v Entity Framework 4,1.</span><span class="sxs-lookup"><span data-stu-id="945ec-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="945ec-104">Pokud používáte starší verzi, některé nebo všechny tyto informace neplatí.</span><span class="sxs-lookup"><span data-stu-id="945ec-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="945ec-105">Tento článek popisuje použití Migrace Code First se stávající databází, kterou vytvořila aplikace Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="945ec-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="945ec-106">V tomto článku se dozvíte, jak používat Migrace Code First v základních scénářích.</span><span class="sxs-lookup"><span data-stu-id="945ec-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="945ec-107">Pokud to neuděláte, budete muset před pokračováním přečíst [migrace Code First](~/ef6/modeling/code-first/migrations/index.md) .</span><span class="sxs-lookup"><span data-stu-id="945ec-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="945ec-108">Screencasty</span><span class="sxs-lookup"><span data-stu-id="945ec-108">Screencasts</span></span>

<span data-ttu-id="945ec-109">Pokud místo toho chcete sledovat záznam dění na záznamovém počítači, než je tento článek přečetl, následující dvě videa se týkají stejného obsahu jako tento článek.</span><span class="sxs-lookup"><span data-stu-id="945ec-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="945ec-110">Video One: "Migrace – pod digestoř"</span><span class="sxs-lookup"><span data-stu-id="945ec-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="945ec-111">[Tento záznam dění](https://channel9.msdn.com/blogs/ef/migrations-under-the-hood) popisuje, jak migrace sleduje a používá informace o modelu pro detekci změn modelu.</span><span class="sxs-lookup"><span data-stu-id="945ec-111">[This screencast](https://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="945ec-112">Video dvě: Migrace – existující databáze</span><span class="sxs-lookup"><span data-stu-id="945ec-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="945ec-113">[Tento záznam dění](https://channel9.msdn.com/blogs/ef/migrations-existing-databases) na základě konceptů z předchozího videa se zabývá tím, jak povolit a používat migrace pomocí existující databáze.</span><span class="sxs-lookup"><span data-stu-id="945ec-113">Building on the concepts from the previous video, [this screencast](https://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="945ec-114">Krok 1: Vytvoření modelu</span><span class="sxs-lookup"><span data-stu-id="945ec-114">Step 1: Create a model</span></span>

<span data-ttu-id="945ec-115">Prvním krokem je vytvoření modelu Code First, který cílí na stávající databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="945ec-116">Podrobné pokyny k tomu, jak to provést, najdete v tématu [Code First do existující databáze](~/ef6/modeling/code-first/workflows/existing-database.md) .</span><span class="sxs-lookup"><span data-stu-id="945ec-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="945ec-117">Před provedením změn v modelu, které by vyžadovaly změny ve schématu databáze, je důležité postupovat podle zbývajících kroků v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="945ec-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="945ec-118">Následující kroky vyžadují, aby byl model synchronizovaný se schématem databáze.</span><span class="sxs-lookup"><span data-stu-id="945ec-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="945ec-119">Krok 2: Povolit migrace</span><span class="sxs-lookup"><span data-stu-id="945ec-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="945ec-120">Dalším krokem je povolení migrací.</span><span class="sxs-lookup"><span data-stu-id="945ec-120">The next step is to enable migrations.</span></span> <span data-ttu-id="945ec-121">To můžete provést spuštěním příkazu **Povolit – migrace** v konzole správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="945ec-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="945ec-122">Tento příkaz vytvoří ve vašem řešení složku s názvem migrace a v rámci ní vloží jednu třídu s názvem konfigurace.</span><span class="sxs-lookup"><span data-stu-id="945ec-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="945ec-123">Konfigurační třída je místo, kde můžete nakonfigurovat migrace pro vaši aplikaci. Další informace najdete v tématu [migrace Code First](~/ef6/modeling/code-first/migrations/index.md) .</span><span class="sxs-lookup"><span data-stu-id="945ec-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="945ec-124">Krok 3: Přidání počáteční migrace</span><span class="sxs-lookup"><span data-stu-id="945ec-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="945ec-125">Po vytvoření a použití migrace do místní databáze můžete také tyto změny použít v jiných databázích.</span><span class="sxs-lookup"><span data-stu-id="945ec-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="945ec-126">Například vaše místní databáze může být testovací databáze a nakonec můžete chtít použít změny také v provozní databázi a v jiných vývojářích testovacích databází.</span><span class="sxs-lookup"><span data-stu-id="945ec-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="945ec-127">Pro tento krok jsou k dispozici dvě možnosti a ten, který byste měli vybrat, závisí na tom, jestli je schéma všech ostatních databází prázdné nebo aktuálně odpovídá schématu místní databáze.</span><span class="sxs-lookup"><span data-stu-id="945ec-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="945ec-128">@no__t – 0Option jednu z těchto akcí: Jako výchozí bod použijte existující schéma. \*\*</span><span class="sxs-lookup"><span data-stu-id="945ec-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="945ec-129">Tento postup byste měli použít, pokud budou další databáze, na které se migrace budou v budoucnu použity, mít stejné schéma jako vaše místní databáze v současné době.</span><span class="sxs-lookup"><span data-stu-id="945ec-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="945ec-130">Můžete to například použít, pokud místní testovací databáze aktuálně odpovídá v1 vaší provozní databáze a později použijete tyto migrace k aktualizaci provozní databáze na v2.</span><span class="sxs-lookup"><span data-stu-id="945ec-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="945ec-131">@no__t – 0Option dvě: Jako výchozí bod použijte prázdnou databázi. \*\*</span><span class="sxs-lookup"><span data-stu-id="945ec-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="945ec-132">Tento postup byste měli použít, pokud budou další databáze, na které se migrace použijí, v budoucnu prázdné (nebo ještě neexistují).</span><span class="sxs-lookup"><span data-stu-id="945ec-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="945ec-133">To můžete použít například v případě, že jste začali vyvíjet aplikaci pomocí testovací databáze, ale bez použití migrace a později budete chtít vytvořit provozní databázi od začátku.</span><span class="sxs-lookup"><span data-stu-id="945ec-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="945ec-134">Možnost jedna: Použít existující schéma jako výchozí bod</span><span class="sxs-lookup"><span data-stu-id="945ec-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="945ec-135">Migrace Code First používá snímek modelu, který je uložený v nejnovější migraci, aby zjistil změny modelu (podrobné informace najdete v [migrace Code First v týmových prostředích](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="945ec-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="945ec-136">Vzhledem k tomu, že předpokládáme, že databáze již mají schéma aktuálního modelu, vytvoříme prázdnou migraci (No-OP), která má aktuální model jako snímek.</span><span class="sxs-lookup"><span data-stu-id="945ec-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="945ec-137">Spusťte příkaz **Add-Migration InitialCreate-IgnoreChanges** v konzole správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="945ec-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="945ec-138">Tím se vytvoří prázdná migrace s aktuálním modelem jako snímek.</span><span class="sxs-lookup"><span data-stu-id="945ec-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="945ec-139">Spusťte příkaz **Update-Database** v konzole správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="945ec-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="945ec-140">Tím se použije migrace InitialCreate na databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="945ec-141">Vzhledem k tomu, že skutečná migrace neobsahuje žádné změny, jednoduše přidá řádek do tabulky \_ @ no__t-1MigrationsHistory, což znamená, že tato migrace již byla použita.</span><span class="sxs-lookup"><span data-stu-id="945ec-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="945ec-142">Možnost dvě: Jako výchozí bod použít prázdnou databázi</span><span class="sxs-lookup"><span data-stu-id="945ec-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="945ec-143">V tomto scénáři potřebujeme migrace, aby bylo možné vytvořit celou databázi úplně od začátku – včetně tabulek, které jsou již obsaženy v naší místní databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="945ec-144">Chystáme se vygenerovat migraci InitialCreate, která obsahuje logiku pro vytvoření existujícího schématu.</span><span class="sxs-lookup"><span data-stu-id="945ec-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="945ec-145">Naše existující databáze pak bude vypadat jako tato migrace již byla použita.</span><span class="sxs-lookup"><span data-stu-id="945ec-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="945ec-146">Spusťte příkaz **Add-Migration InitialCreate** v konzole správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="945ec-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="945ec-147">Tím se vytvoří migrace pro vytvoření existujícího schématu.</span><span class="sxs-lookup"><span data-stu-id="945ec-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="945ec-148">Odkomentujte veškerý kód v metodě up nově vytvořené migrace.</span><span class="sxs-lookup"><span data-stu-id="945ec-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="945ec-149">To nám umožní použít migraci na místní databázi bez nutnosti znovu vytvořit všechny tabulky atd., které už existují.</span><span class="sxs-lookup"><span data-stu-id="945ec-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="945ec-150">Spusťte příkaz **Update-Database** v konzole správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="945ec-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="945ec-151">Tím se použije migrace InitialCreate na databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="945ec-152">Vzhledem k tomu, že skutečná migrace neobsahuje žádné změny (protože jsme je dočasně odhlásili), jednoduše přidá řádek do tabulky \_ @ no__t-1MigrationsHistory, která značí, že tato migrace již byla použita.</span><span class="sxs-lookup"><span data-stu-id="945ec-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="945ec-153">Zruší komentář kódu v metodě up.</span><span class="sxs-lookup"><span data-stu-id="945ec-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="945ec-154">To znamená, že když se tato migrace použije v budoucích databázích, vytvoří se v rámci migrace schéma, které už existovalo v místní databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="945ec-155">Co je potřeba vědět o</span><span class="sxs-lookup"><span data-stu-id="945ec-155">Things to be aware of</span></span>

<span data-ttu-id="945ec-156">K dispozici je několik věcí, které je potřeba vzít v úvahu při použití migrace na stávající databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="945ec-157">Výchozí/počítaný název nemusí odpovídat existujícímu schématu.</span><span class="sxs-lookup"><span data-stu-id="945ec-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="945ec-158">Migrace explicitně specifikuje názvy pro sloupce a tabulky, když dojde k jejich vygenerování.</span><span class="sxs-lookup"><span data-stu-id="945ec-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="945ec-159">Existují však i další databázové objekty, které migrace při použití migrace vypočítá výchozí název.</span><span class="sxs-lookup"><span data-stu-id="945ec-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="945ec-160">To zahrnuje indexy a omezení cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="945ec-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="945ec-161">Při cílení na stávající schéma nemusí tyto počítané názvy odpovídat, co ve vaší databázi skutečně existuje.</span><span class="sxs-lookup"><span data-stu-id="945ec-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="945ec-162">Tady je několik příkladů, kdy je potřeba mít na paměti tyto informace:</span><span class="sxs-lookup"><span data-stu-id="945ec-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="945ec-163">@no__t – 0If jste použili možnost One: Použít existující schéma jako výchozí bod z kroku 3: \*\*</span><span class="sxs-lookup"><span data-stu-id="945ec-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="945ec-164">Pokud budoucí změny v modelu vyžadují změnu nebo odstranění jednoho z databázových objektů, které jsou pojmenovány jinak, bude nutné změnit vygenerované migrace do systému zadáním správného názvu.</span><span class="sxs-lookup"><span data-stu-id="945ec-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="945ec-165">Rozhraní API migrace mají volitelný parametr názvu, který vám to umožňuje.</span><span class="sxs-lookup"><span data-stu-id="945ec-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="945ec-166">Vaše existující schéma může mít například tabulku post se sloupcem cizího klíče BlogId, která má index s názvem IndexFk @ no__t-0BlogId.</span><span class="sxs-lookup"><span data-stu-id="945ec-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="945ec-167">Ve výchozím nastavení však migrace očekává, že tento index bude pojmenován na IX @ no__t-0BlogId.</span><span class="sxs-lookup"><span data-stu-id="945ec-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="945ec-168">Pokud provedete změnu modelu, který má za následek vyřazení tohoto indexu, budete muset změnit vygenerované DropIndex volání a zadat název IndexFk @ no__t-0BlogId.</span><span class="sxs-lookup"><span data-stu-id="945ec-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="945ec-169">@no__t – 0If jste použili možnost 2: Použít prázdnou databázi jako výchozí bod z kroku 3: \*\*</span><span class="sxs-lookup"><span data-stu-id="945ec-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="945ec-170">Pokus o spuštění metody snížení počáteční migrace (tj. návrat k prázdné databázi) proti místní databázi může selhat, protože migrace se pokusí vyřadit indexy a omezení cizího klíče pomocí nesprávných názvů.</span><span class="sxs-lookup"><span data-stu-id="945ec-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="945ec-171">To bude mít vliv jenom na vaši místní databázi, protože jiné databáze se vytvoří od začátku pomocí metody počáteční migrace.</span><span class="sxs-lookup"><span data-stu-id="945ec-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="945ec-172">Chcete-li downgradovat stávající místní databázi do prázdného stavu, je nejjednodušší to provést ručně, a to tak, že databázi vyřadíte nebo vyřadíte všechny tabulky.</span><span class="sxs-lookup"><span data-stu-id="945ec-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="945ec-173">Po počátečním downgradu se všechny objekty databáze znovu vytvoří s výchozími názvy, takže se tento problém neprojeví znovu.</span><span class="sxs-lookup"><span data-stu-id="945ec-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="945ec-174">Pokud budoucí změny v modelu vyžadují změnu nebo odstranění jednoho z databázových objektů, které jsou pojmenovány jinak, nebude tato akce fungovat na stávající místní databázi – protože názvy nebudou odpovídat výchozím hodnotám.</span><span class="sxs-lookup"><span data-stu-id="945ec-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="945ec-175">Bude ale fungovat s databázemi vytvořenými od začátku, protože budou používat výchozí názvy zvolené migracemi.</span><span class="sxs-lookup"><span data-stu-id="945ec-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="945ec-176">Tyto změny můžete provést buď ručně v místní existující databázi, nebo můžete zvážit, že se databáze znovu vytvoří od začátku – stejně jako na jiných počítačích.</span><span class="sxs-lookup"><span data-stu-id="945ec-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="945ec-177">Databáze vytvořené pomocí metody up počáteční migrace se můžou mírně lišit od místní databáze, protože se použijí počítané výchozí názvy pro indexy a omezení cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="945ec-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="945ec-178">Kromě toho může dokončit i další indexy, protože migrace vytvoří ve výchozím nastavení indexy pro sloupce cizího klíče – to ale nemusí být v původní místní databázi.</span><span class="sxs-lookup"><span data-stu-id="945ec-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="945ec-179">V modelu nejsou reprezentovány všechny objekty databáze.</span><span class="sxs-lookup"><span data-stu-id="945ec-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="945ec-180">Objekty databáze, které nejsou součástí vašeho modelu, nebudou zajišťovat migrace.</span><span class="sxs-lookup"><span data-stu-id="945ec-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="945ec-181">To může zahrnovat zobrazení, uložené procedury, oprávnění, tabulky, které nejsou součástí modelu, další indexy atd.</span><span class="sxs-lookup"><span data-stu-id="945ec-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="945ec-182">Tady je několik příkladů, kdy je potřeba mít na paměti tyto informace:</span><span class="sxs-lookup"><span data-stu-id="945ec-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="945ec-183">Bez ohledu na možnost, kterou jste zvolili v části "krok 3", pokud budoucí změny v modelu vyžadují změnu nebo odstranění těchto dalších objektů, nebudete při provádění těchto změn potřebovat migrace.</span><span class="sxs-lookup"><span data-stu-id="945ec-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="945ec-184">Pokud například vyřadíte sloupec, který obsahuje další index, migrace nevědí, že se index vyřadí.</span><span class="sxs-lookup"><span data-stu-id="945ec-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="945ec-185">Tento postup bude nutné přidat do vygenerované migrace ručně.</span><span class="sxs-lookup"><span data-stu-id="945ec-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="945ec-186">Pokud jste použili možnost 2: Jako výchozí bod použijte prázdnou databázi. tyto další objekty nebudou vytvořeny metodou up počáteční migrace.</span><span class="sxs-lookup"><span data-stu-id="945ec-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="945ec-187">V případě potřeby můžete upravit metody nahoru a dolů a pořídit tyto další objekty.</span><span class="sxs-lookup"><span data-stu-id="945ec-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="945ec-188">Pro objekty, které nejsou nativně podporované v rozhraní API pro migraci, jako jsou například zobrazení – můžete použít metodu [SQL](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) ke spuštění nezpracovaných SQL pro jejich vytvoření nebo přesunutí.</span><span class="sxs-lookup"><span data-stu-id="945ec-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
