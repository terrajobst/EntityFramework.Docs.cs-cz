---
title: Migrace Code First s existující databází - EF6
author: divega
ms.date: 10/23/2016
ms.assetid: f0cc4f93-67dd-4664-9753-0a9f913814db
ms.openlocfilehash: 77370ec7d922b8324b924a0b4aca3e58f5ec6066
ms.sourcegitcommit: 2b787009fd5be5627f1189ee396e708cd130e07b
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/13/2018
ms.locfileid: "45490568"
---
# <a name="code-first-migrations-with-an-existing-database"></a><span data-ttu-id="158fb-102">Migrace Code First s existující databáze</span><span class="sxs-lookup"><span data-stu-id="158fb-102">Code First Migrations with an existing database</span></span>
> [!NOTE]
> <span data-ttu-id="158fb-103">**EF4.3 a vyšší pouze** – funkce rozhraní API, atd. popsané na této stránce se zavedly v Entity Framework 4.1.</span><span class="sxs-lookup"><span data-stu-id="158fb-103">**EF4.3 Onwards Only** - The features, APIs, etc. discussed in this page were introduced in Entity Framework 4.1.</span></span> <span data-ttu-id="158fb-104">Pokud používáte starší verzi, některé nebo všechny informace neplatí.</span><span class="sxs-lookup"><span data-stu-id="158fb-104">If you are using an earlier version, some or all of the information does not apply.</span></span>

<span data-ttu-id="158fb-105">Tento článek se týká pomocí migrace Code First s existující databázi, který nebyl vytvořen poskytovatelem Entity Framework.</span><span class="sxs-lookup"><span data-stu-id="158fb-105">This article covers using Code First Migrations with an existing database, one that wasn’t created by Entity Framework.</span></span>

> [!NOTE]
> <span data-ttu-id="158fb-106">Tento článek předpokládá, že víte, jak pomocí migrace Code First v základní scénáře.</span><span class="sxs-lookup"><span data-stu-id="158fb-106">This article assumes you know how to use Code First Migrations in basic scenarios.</span></span> <span data-ttu-id="158fb-107">Pokud ne, pak budete muset přečíst [migrace Code First](~/ef6/modeling/code-first/migrations/index.md) než budete pokračovat.</span><span class="sxs-lookup"><span data-stu-id="158fb-107">If you don’t, then you’ll need to read [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) before continuing.</span></span>

## <a name="screencasts"></a><span data-ttu-id="158fb-108">Screencasty</span><span class="sxs-lookup"><span data-stu-id="158fb-108">Screencasts</span></span>

<span data-ttu-id="158fb-109">Pokud byste raději přehrát záznam dění na monitoru než v tomto článku, následující dvě videa zahrnují obsah jako v tomto článku.</span><span class="sxs-lookup"><span data-stu-id="158fb-109">If you'd rather watch a screencast than read this article, the following two videos cover the same content as this article.</span></span>

### <a name="video-one-migrations---under-the-hood"></a><span data-ttu-id="158fb-110">Video jeden: "Migrace - pod pokličkou"</span><span class="sxs-lookup"><span data-stu-id="158fb-110">Video One: "Migrations - Under the Hood"</span></span>

<span data-ttu-id="158fb-111">[Tento záznam dění na monitoru](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) vysvětluje, jak migrace sleduje a používá informace o modelu ke zjištění změny modelu.</span><span class="sxs-lookup"><span data-stu-id="158fb-111">[This screencast](http://channel9.msdn.com/blogs/ef/migrations-under-the-hood) covers how migrations tracks and uses information about the model to detect model changes.</span></span>

### <a name="video-two-migrations---existing-databases"></a><span data-ttu-id="158fb-112">Dvě videa: "Migrace – existující databáze"</span><span class="sxs-lookup"><span data-stu-id="158fb-112">Video Two: "Migrations - Existing Databases"</span></span>

<span data-ttu-id="158fb-113">Stavíme na koncepty z předchozí video [tento záznam dění na monitoru](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) dozvíte, jak povolit a používat migrace s existující databázi.</span><span class="sxs-lookup"><span data-stu-id="158fb-113">Building on the concepts from the previous video, [this screencast](http://channel9.msdn.com/blogs/ef/migrations-existing-databases) covers how to enable and use migrations with an existing database.</span></span>

## <a name="step-1-create-a-model"></a><span data-ttu-id="158fb-114">Krok 1: Vytvoření modelu</span><span class="sxs-lookup"><span data-stu-id="158fb-114">Step 1: Create a model</span></span>

<span data-ttu-id="158fb-115">Prvním krokem bude vytvoření modelu Code First, zaměřuje na existující databázi.</span><span class="sxs-lookup"><span data-stu-id="158fb-115">Your first step will be to create a Code First model that targets your existing database.</span></span> <span data-ttu-id="158fb-116">[Code First pro existující databázi](~/ef6/modeling/code-first/workflows/existing-database.md) téma obsahuje podrobné informace o tom, jak to provést.</span><span class="sxs-lookup"><span data-stu-id="158fb-116">The [Code First to an Existing Database](~/ef6/modeling/code-first/workflows/existing-database.md) topic provides detailed guidance on how to do this.</span></span>

>[!NOTE]
> <span data-ttu-id="158fb-117">Je důležité, abyste před provedením jakýchkoli změn do modelu, které by vyžadovaly změny schématu databáze postupujte podle zbývajících kroků v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="158fb-117">It is important to follow the rest of the steps in this topic before making any changes to your model that would require changes to the database schema.</span></span> <span data-ttu-id="158fb-118">Následující kroky vyžadují modelu, který má být synchronizovaná se schématem databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-118">The following steps require the model to be in-sync with the database schema.</span></span>

## <a name="step-2-enable-migrations"></a><span data-ttu-id="158fb-119">Krok 2: Povolení migrace</span><span class="sxs-lookup"><span data-stu-id="158fb-119">Step 2: Enable Migrations</span></span>

<span data-ttu-id="158fb-120">Dalším krokem je povolení migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-120">The next step is to enable migrations.</span></span> <span data-ttu-id="158fb-121">Můžete to provést spuštěním **povolení migrace** příkazu v konzole Správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="158fb-121">You can do this by running the **Enable-Migrations** command in Package Manager Console.</span></span>

<span data-ttu-id="158fb-122">Tento příkaz se vytvořte složku ve vašem řešení, volá se, migrace a vložit jednu třídu dovnitř označuje konfigurace.</span><span class="sxs-lookup"><span data-stu-id="158fb-122">This command will create a folder in your solution called Migrations, and put a single class inside it called Configuration.</span></span> <span data-ttu-id="158fb-123">Třídu konfigurace je, kde konfigurujete migrace pro vaši aplikaci, můžete zjistit další informace se dozvíte v [migrace Code First](~/ef6/modeling/code-first/migrations/index.md) tématu.</span><span class="sxs-lookup"><span data-stu-id="158fb-123">The Configuration class is where you configure migrations for your application, you can find out more about it in the [Code First Migrations](~/ef6/modeling/code-first/migrations/index.md) topic.</span></span>

## <a name="step-3-add-an-initial-migration"></a><span data-ttu-id="158fb-124">Krok 3: Přidání počáteční migraci</span><span class="sxs-lookup"><span data-stu-id="158fb-124">Step 3: Add an initial migration</span></span>

<span data-ttu-id="158fb-125">Po migrace byly vytvořeny a použity k místní databázi, můžete také použít změní na ostatní databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-125">Once migrations have been created and applied to the local database you may also want to apply these changes to other databases.</span></span> <span data-ttu-id="158fb-126">Například vaše místní databáze může být testovací databázi a nakonec můžete také změny se projeví na provozní databázi a/nebo jinými vývojáři testovací databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-126">For example, your local database may be a test database and you may ultimately want to also apply the changes to a production database and/or other developers test databases.</span></span> <span data-ttu-id="158fb-127">Existují dvě možnosti pro tento krok a ten, který by měl vybrat závisí, zda schéma případné další databáze, je prázdný nebo aktuálně odpovídá schématu místní databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-127">There are two options for this step and the one you should pick depends whether or not the schema of any other databases is empty or currently matches the schema of the local database.</span></span>

-   <span data-ttu-id="158fb-128">**Jedna možnost: Použijte stávající schéma jako výchozí bod.**</span><span class="sxs-lookup"><span data-stu-id="158fb-128">**Option One: Use existing schema as starting point.**</span></span> <span data-ttu-id="158fb-129">Tento postup byste měli použít při další databáze, které migrace se použijí pro v budoucnu budou mít stejné schéma jako aktuálně má vaše místní databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-129">You should use this approach when other databases that migrations will be applied to in the future will have the same schema as your local database currently has.</span></span> <span data-ttu-id="158fb-130">To můžete použít například, pokud vaše místní testovací databáze aktuálně odpovídá v1 vaši produkční databázi a se později použijí tyto migrace aktualizovat vaši produkční databázi na v2.</span><span class="sxs-lookup"><span data-stu-id="158fb-130">For example, you might use this if your local test database currently matches v1 of your production database and you will later apply these migrations to update your production database to v2.</span></span>
-   <span data-ttu-id="158fb-131">**Možnost 2: Použití prázdnou databázi jako počáteční bod.**</span><span class="sxs-lookup"><span data-stu-id="158fb-131">**Option Two: Use empty database as starting point.**</span></span> <span data-ttu-id="158fb-132">Tento postup byste měli použít, když ostatní databáze, které migrace se použijí k budoucímu jsou prázdné (nebo ještě neexistuje).</span><span class="sxs-lookup"><span data-stu-id="158fb-132">You should use this approach when other databases that migrations will be applied to in the future are empty (or do not exist yet).</span></span> <span data-ttu-id="158fb-133">To můžete použít například, pokud začít vyvíjet svoji aplikaci pomocí testovací databázi, ale bez použití migrace a budete později chtít vytvořit produkční databáze od začátku.</span><span class="sxs-lookup"><span data-stu-id="158fb-133">For example, you might use this if you started developing your application using a test database but without using migrations and you will later want to create a production database from scratch.</span></span>

### <a name="option-one-use-existing-schema-as-a-starting-point"></a><span data-ttu-id="158fb-134">Jedna možnost: Používejte stávající schéma jako počáteční bod</span><span class="sxs-lookup"><span data-stu-id="158fb-134">Option One: Use existing schema as a starting point</span></span>

<span data-ttu-id="158fb-135">Migrace Code First pomocí snímku model uložených v nejnovější migrace zjišťuje změny modelu (zjistíte podrobné informace najdete v [migrace Code First v prostředích Team](~/ef6/modeling/code-first/migrations/teams.md)).</span><span class="sxs-lookup"><span data-stu-id="158fb-135">Code First Migrations uses a snapshot of the model stored in the most recent migration to detect changes to the model (you can find detailed information about this in [Code First Migrations in Team Environments](~/ef6/modeling/code-first/migrations/teams.md)).</span></span> <span data-ttu-id="158fb-136">Vzhledem k tomu, že budeme předpokládat, že databáze již mít schéma aktuálního modelu, vygenerujeme migrace (no-op) do prázdné, která má aktuální model jako snímek.</span><span class="sxs-lookup"><span data-stu-id="158fb-136">Since we are going to assume that databases already have the schema of the current model, we will generate an empty (no-op) migration that has the current model as a snapshot.</span></span>

1.  <span data-ttu-id="158fb-137">Spustit **přidat migrace InitialCreate – IgnoreChanges** příkazu v konzole Správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="158fb-137">Run the **Add-Migration InitialCreate –IgnoreChanges** command in Package Manager Console.</span></span> <span data-ttu-id="158fb-138">Tím se vytvoří prázdný migrace současného modelu jako snímek.</span><span class="sxs-lookup"><span data-stu-id="158fb-138">This creates an empty migration with the current model as a snapshot.</span></span>
2.  <span data-ttu-id="158fb-139">Spustit **aktualizace databáze** příkazu v konzole Správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="158fb-139">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="158fb-140">Tato operace provede určité InitialCreate migrace do databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-140">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="158fb-141">Protože skutečné migrace neobsahuje žádné změny, bude jednoduše přidat řádek \_ \_MigrationsHistory tabulky určující, že se tato migrace už používá.</span><span class="sxs-lookup"><span data-stu-id="158fb-141">Since the actual migration doesn’t contain any changes, it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>

### <a name="option-two-use-empty-database-as-a-starting-point"></a><span data-ttu-id="158fb-142">Možnost 2: Jako výchozí bod použijte prázdnou databázi</span><span class="sxs-lookup"><span data-stu-id="158fb-142">Option Two: Use empty database as a starting point</span></span>

<span data-ttu-id="158fb-143">V tomto scénáři musíte migrace budete moci vytvořit celé databáze od začátku – včetně tabulek, které jsou již přítomny v místní databázi.</span><span class="sxs-lookup"><span data-stu-id="158fb-143">In this scenario we need Migrations to be able to create the entire database from scratch – including the tables that are already present in our local database.</span></span> <span data-ttu-id="158fb-144">My budeme generovat migrace do InitialCreate, který obsahuje logiku pro vytvoření existující schématu.</span><span class="sxs-lookup"><span data-stu-id="158fb-144">We’re going to generate an InitialCreate migration that includes logic to create the existing schema.</span></span> <span data-ttu-id="158fb-145">Potom uděláme naší stávající databázi vypadají této migrace se už používá.</span><span class="sxs-lookup"><span data-stu-id="158fb-145">We’ll then make our existing database look like this migration has already been applied.</span></span>

1.  <span data-ttu-id="158fb-146">Spustit **přidat migrace InitialCreate** příkazu v konzole Správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="158fb-146">Run the **Add-Migration InitialCreate** command in Package Manager Console.</span></span> <span data-ttu-id="158fb-147">Tím se vytvoří migrace k vytvoření existující schématu.</span><span class="sxs-lookup"><span data-stu-id="158fb-147">This creates a migration to create the existing schema.</span></span>
2.  <span data-ttu-id="158fb-148">Okomentujte veškerý kód v metodě nahoru nově vytvořený migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-148">Comment out all code in the Up method of the newly created migration.</span></span> <span data-ttu-id="158fb-149">To vám umožní nám "" migrace do místní databáze bez pokusu o znovu vytvořit všechny tabulky atd., které již existují.</span><span class="sxs-lookup"><span data-stu-id="158fb-149">This will allow us to ‘apply’ the migration to the local database without trying to recreate all the tables etc. that already exist.</span></span>
3.  <span data-ttu-id="158fb-150">Spustit **aktualizace databáze** příkazu v konzole Správce balíčků.</span><span class="sxs-lookup"><span data-stu-id="158fb-150">Run the **Update-Database** command in Package Manager Console.</span></span> <span data-ttu-id="158fb-151">Tato operace provede určité InitialCreate migrace do databáze.</span><span class="sxs-lookup"><span data-stu-id="158fb-151">This will apply the InitialCreate migration to the database.</span></span> <span data-ttu-id="158fb-152">Od skutečné migrace neobsahuje změny (protože jsme dočasně opatřený komentáři je), se jednoduše přidejte řádek \_ \_MigrationsHistory tabulky určující, že se tato migrace už používá.</span><span class="sxs-lookup"><span data-stu-id="158fb-152">Since the actual migration doesn’t contain any changes (because we temporarily commented them out), it will simply add a row to the \_\_MigrationsHistory table indicating that this migration has already been applied.</span></span>
4.  <span data-ttu-id="158fb-153">Zrušit komentář kód v metodě nahoru.</span><span class="sxs-lookup"><span data-stu-id="158fb-153">Un-comment the code in the Up method.</span></span> <span data-ttu-id="158fb-154">To znamená, že při použití této migrace u budoucích databází, schéma, které již existoval v místní databázi vytvořené pomocí migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-154">This means that when this migration is applied to future databases, the schema that already existed in the local database will be created by migrations.</span></span>

## <a name="things-to-be-aware-of"></a><span data-ttu-id="158fb-155">Co je potřeba mít na paměti</span><span class="sxs-lookup"><span data-stu-id="158fb-155">Things to be aware of</span></span>

<span data-ttu-id="158fb-156">Existuje několik věcí, které je potřeba mít na paměti při použití migrace na existující databázi.</span><span class="sxs-lookup"><span data-stu-id="158fb-156">There are a few things you need to be aware of when using Migrations against an existing database.</span></span>

### <a name="defaultcalculated-names-may-not-match-existing-schema"></a><span data-ttu-id="158fb-157">Vypočítá/výchozí názvy nemusí odpovídat existujícím schématu</span><span class="sxs-lookup"><span data-stu-id="158fb-157">Default/calculated names may not match existing schema</span></span>

<span data-ttu-id="158fb-158">Migrace explicitně určuje názvy sloupců a tabulek, když ji vygeneruje uživatelské rozhraní migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-158">Migrations explicitly specifies names for columns and tables when it scaffolds a migrations.</span></span> <span data-ttu-id="158fb-159">Existují však ostatních databázových objektů, které migrace vypočítává výchozí název, při použití migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-159">However, there are other database objects that Migrations calculates a default name for when applying the migrations.</span></span> <span data-ttu-id="158fb-160">To zahrnuje indexy a omezení cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="158fb-160">This includes indexes and foreign key constraints.</span></span> <span data-ttu-id="158fb-161">Při cílení na stávajícím schématu, tyto počítané názvy nemusí odpovídat, co skutečně existuje v databázi.</span><span class="sxs-lookup"><span data-stu-id="158fb-161">When targeting an existing schema, these calculated names may not match what actually exists in your database.</span></span>

<span data-ttu-id="158fb-162">Tady je několik příkladů, když je třeba tomu věnovat pozornost:</span><span class="sxs-lookup"><span data-stu-id="158fb-162">Here are some examples of when you need to be aware of this:</span></span>

<span data-ttu-id="158fb-163">**Pokud jste použili "jedna možnost: jako výchozí bod použijte existující schéma" z kroku 3:**</span><span class="sxs-lookup"><span data-stu-id="158fb-163">**If you used ‘Option One: Use existing schema as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="158fb-164">Pokud budoucí změny v modelu nevyžaduje změnu nebo jeden z databázových objektů, které je pojmenované jinak vyřadit, musíte změnit automaticky generovaný migraci zadejte správný název.</span><span class="sxs-lookup"><span data-stu-id="158fb-164">If future changes in your model require changing or dropping one of the database objects that is named differently, you will need to modify the scaffolded migration to specify the correct name.</span></span> <span data-ttu-id="158fb-165">Migrace rozhraní API obsahovat nepovinný parametr název, který umožňuje udělat.</span><span class="sxs-lookup"><span data-stu-id="158fb-165">The Migrations APIs have an optional Name parameter that allows you to do this.</span></span>
    <span data-ttu-id="158fb-166">Například existující schéma může obsahovat tabulku příspěvek se BlogId sloupec cizího klíče, který má index s názvem IndexFk\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="158fb-166">For example, your existing schema may have a Post table with a BlogId foreign key column that has an index named IndexFk\_BlogId.</span></span> <span data-ttu-id="158fb-167">Ale ve výchozím nastavení migrace by uživatel očekával tento index s názvem IX\_BlogId.</span><span class="sxs-lookup"><span data-stu-id="158fb-167">However, by default Migrations would expect this index to be named IX\_BlogId.</span></span> <span data-ttu-id="158fb-168">Pokud změníte model, který má za následek odstranění tohoto indexu, musíte změnit automaticky generovaný DropIndex volání k určení IndexFk\_BlogId název.</span><span class="sxs-lookup"><span data-stu-id="158fb-168">If you make a change to your model that results in dropping this index, you will need to modify the scaffolded DropIndex call to specify the IndexFk\_BlogId name.</span></span>

<span data-ttu-id="158fb-169">**Pokud jste použili "možnost 2: použití prázdnou databázi jako výchozí bod" z kroku 3:**</span><span class="sxs-lookup"><span data-stu-id="158fb-169">**If you used ‘Option Two: Use empty database as a starting point’ from Step 3:**</span></span>

-   <span data-ttu-id="158fb-170">Chcete spustit metodu nižší počáteční migraci (který se vrátí k prázdnou databázi) na místní databázi může selhat, protože se pokusí migrace vyřaďte indexy a omezení cizího klíče pomocí správné názvy.</span><span class="sxs-lookup"><span data-stu-id="158fb-170">Trying to run the Down method of the initial migration (that is, reverting to an empty database) against your local database may fail because Migrations will try to drop indexes and foreign key constraints using the incorrect names.</span></span> <span data-ttu-id="158fb-171">Jen to bude mít vliv na vaše místní databáze od jiných databází se vytvoří úplně od začátku pomocí metody nahoru počáteční migraci.</span><span class="sxs-lookup"><span data-stu-id="158fb-171">This will only affect your local database since other databases will be created from scratch using the Up method of the initial migration.</span></span>
    <span data-ttu-id="158fb-172">Pokud chcete přejít na nižší verzi vaší stávající místní databázi pro prázdný stav je nejjednodušší provést ručně, buď ve vyřazení databáze nebo vyřadit všechny tabulky.</span><span class="sxs-lookup"><span data-stu-id="158fb-172">If you want to downgrade your existing local database to an empty state it is easiest to do this manually, either by dropping the database or dropping all the tables.</span></span> <span data-ttu-id="158fb-173">Po tomto počáteční přechod na starší verzi, které všechny objekty databáze se znovu vytvoří s výchozími názvy proto tento problém nebude k dispozici samotné znovu.</span><span class="sxs-lookup"><span data-stu-id="158fb-173">After this initial downgrade all database objects will be recreated with the default names, so this issue will not present itself again.</span></span>
-   <span data-ttu-id="158fb-174">Pokud budoucí změny v modelu nevyžaduje změnu nebo jeden z databázových objektů, které je pojmenované jinak vyřadit, to nebude fungovat na vaší stávající místní databázi – protože názvy nebudou odpovídat výchozí hodnoty.</span><span class="sxs-lookup"><span data-stu-id="158fb-174">If future changes in your model require changing or dropping one of the database objects that is named differently, this will not work against your existing local database – since the names won’t match the defaults.</span></span> <span data-ttu-id="158fb-175">Však bude fungovat s databázemi, které byly vytvořeny 'od začátku' vzhledem k tomu, že se mají používat výchozí názvy zvolí migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-175">However, it will work against databases that were created ‘from scratch’ since they will have used the default names chosen by Migrations.</span></span>
    <span data-ttu-id="158fb-176">Může tyto změny provést ručně ve vaší stávající místní databázi, nebo zvažte, jestli by migrace znovu vytvořit databázi úplně od začátku – stejně jako ji na jiné počítače.</span><span class="sxs-lookup"><span data-stu-id="158fb-176">You could either make these changes manually on your local existing database, or consider having Migrations recreate your database from scratch – as it will on other machines.</span></span>
-   <span data-ttu-id="158fb-177">Vytvořené metodou nahoru počáteční migraci databáze se mohou poněkud lišit z místní databáze od počítaných výchozí názvy pro indexy a použije omezení cizího klíče.</span><span class="sxs-lookup"><span data-stu-id="158fb-177">Databases created using the Up method of your initial migration may differ slightly from the local database since the calculated default names for indexes and foreign key constraints will be used.</span></span> <span data-ttu-id="158fb-178">Můžete také skončit s další indexy jako migrace ve výchozím nastavení vytvoří indexy na sloupce cizích klíčů – to nemusí být případ v místní databázi.</span><span class="sxs-lookup"><span data-stu-id="158fb-178">You may also end up with extra indexes as Migrations will create indexes on foreign key columns by default – this may not have been the case in your original local database.</span></span>

### <a name="not-all-database-objects-are-represented-in-the-model"></a><span data-ttu-id="158fb-179">Ne všechny databázové objekty jsou reprezentovány v modelu</span><span class="sxs-lookup"><span data-stu-id="158fb-179">Not all database objects are represented in the model</span></span>

<span data-ttu-id="158fb-180">Databázové objekty, které nejsou součástí modelu nesmí být zpracovány migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-180">Database objects that are not part of your model will not be handled by Migrations.</span></span> <span data-ttu-id="158fb-181">To může zahrnovat zobrazení, uložené procedury, oprávnění, tabulky, které nejsou součástí modelu, další indexy, atd.</span><span class="sxs-lookup"><span data-stu-id="158fb-181">This can include views, stored procedures, permissions, tables that are not part of your model, additional indexes, etc.</span></span>

<span data-ttu-id="158fb-182">Tady je několik příkladů, když je třeba tomu věnovat pozornost:</span><span class="sxs-lookup"><span data-stu-id="158fb-182">Here are some examples of when you need to be aware of this:</span></span>

-   <span data-ttu-id="158fb-183">Bez ohledu na to, možnost jste vybrali v kroku 3 Pokud budoucí změny v modelu nevyžaduje změnu nebo vyřadit tyto další objekty migrace nebude vědět o provedení těchto změn.</span><span class="sxs-lookup"><span data-stu-id="158fb-183">Regardless of the option you chose in ‘Step 3’, if future changes in your model require changing or dropping these additional objects Migrations will not know to make these changes.</span></span> <span data-ttu-id="158fb-184">Například pokud je sloupec, který obsahuje další index ho vyřadit, migrace nebude vědět o drop index.</span><span class="sxs-lookup"><span data-stu-id="158fb-184">For example, if you drop a column that has an additional index on it, Migrations will not know to drop the index.</span></span> <span data-ttu-id="158fb-185">Je potřeba ručně přidat vygenerované migrace.</span><span class="sxs-lookup"><span data-stu-id="158fb-185">You will need to manually add this to the scaffolded Migration.</span></span>
-   <span data-ttu-id="158fb-186">Pokud jste použili "možnost 2: použijte prázdnou databázi jako výchozí bod", tyto další objekty se nevytvoří metodou nahoru počáteční migraci.</span><span class="sxs-lookup"><span data-stu-id="158fb-186">If you used ‘Option Two: Use empty database as a starting point’, these additional objects will not be created by the Up method of your initial migration.</span></span>
    <span data-ttu-id="158fb-187">Můžete upravit nahoru a dolů metody postará se o tyto další objekty, pokud si přejete.</span><span class="sxs-lookup"><span data-stu-id="158fb-187">You can modify the Up and Down methods to take care of these additional objects if you wish.</span></span> <span data-ttu-id="158fb-188">Pro objekty, které nativně nepodporují v rozhraní API migrace – například zobrazení – můžete použít [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) způsob spuštění nezpracovaná SQL k vytvoření/drop je.</span><span class="sxs-lookup"><span data-stu-id="158fb-188">For objects that are not natively supported in the Migrations API – such as views – you can use the [Sql](https://msdn.microsoft.com/library/system.data.entity.migrations.dbmigration.sql.aspx) method to run raw SQL to create/drop them.</span></span>
